(()=>{"use strict";function t(r){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(r)}function r(r,e){if(r&&"object"===t(r))return e.split(".").reduce((function(t,r){return t&&t[r]}),r)}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function o(t){var n=this,o=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",o=(new DOMParser).parseFromString(r,"text/html"),a=o.querySelectorAll(n),i=[];return a.forEach((function(r){var n,o=function(t){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(r.attributes);try{var a=function(){var e=n.value;if(t.some((function(t){return e.name.startsWith(t)})))return i.push(r),1};for(o.s();!(n=o.n()).done&&!a(););}catch(t){o.e(t)}finally{o.f()}})),{doc:o,matchedElements:i}}(["el",":","@"],t),a=o.doc;return o.matchedElements.forEach((function(t){Array.from(t.attributes).forEach((function(o){var a,i,u=o.value.trim();if((o.name.startsWith("el:")||"el"===o.name)&&t.setAttribute("data-parent",n.tagName.toLowerCase()),o.name.startsWith(":")&&("class"===o.name.slice(1)&&u.split(",").map((function(t){return t.trim()})).forEach((function(e){t.classList.add(r(n,e))})),t.removeAttribute(o.name)),o.name.startsWith("@")){var c=o.name.slice(1);if(u.match(/=/i)){var l=(a=u.split("=").map((function(t){return t.trim()})),i=2,function(t){if(Array.isArray(t))return t}(a)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=a.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(a,i)||e(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=l[0],s=l[1];t.setAttribute("data-event",c),t.setAttribute("data-prop",f),t.setAttribute("data-newvalue",s)}else{var y=u.match(/^([a-zA-Z0-9_]+)\((.*?)\)$/);if(y){var m=y[1];t.setAttribute("data-event",c),t.setAttribute("data-method",m);var p=null;y[2]&&y[2].match(/,/i)?y[2].split(",").map((function(t){t=n.getDynamicData(t)})).join(", "):y[2]&&(p=n.getDynamicData(y[2])),t.setAttribute("data-args",JSON.stringify(p))}else t.setAttribute("data-event",c),t.setAttribute("data-method",u)}t.removeAttribute(o.name),n.processEvents()}}))})),a.body.innerHTML}function a(){var r=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(new DOMParser).parseFromString(e,"text/html");return this.querySelectorAll("[data-event]").forEach((function(e){var n=!1,o=e.getAttribute("data-event"),a=e.getAttribute("data-prop"),i=e.getAttribute("data-newvalue"),u=e.getAttribute("data-method"),c=e.getAttribute("data-args")||null;o.match(/\.prevent/i)&&(n=!0,o=o.replace(".prevent","")),e.removeAttribute("data-event"),e.removeAttribute("data-prop"),e.removeAttribute("data-newvalue"),e.removeAttribute("data-method"),e.removeAttribute("data-args"),e.addEventListener(o,(function(e){var o;n&&e.preventDefault(),a&&(o=r.getDynamicData(i),function(r,e,n){for(var o=e.split("."),a=r,i=0;i<o.length-1;i++){var u=o[i];a[u]&&"object"===t(a[u])||(a[u]={}),a=a[u]}a[o[o.length-1]]=n}(r,a,o)),u&&"function"==typeof r[u]&&r[u](c)}))})),n.body.innerHTML}function i(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=a.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,r)||function(t,r){if(t){if("string"==typeof t)return u(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function c(t){var e=this,n=(new DOMParser).parseFromString(t,"text/html");return n.querySelectorAll("[j-for]").forEach((function(t){t.querySelector("[j-if]");var n,o=t.getAttribute("j-for");t.removeAttribute("j-for");var a=i(o.split(" in ").map((function(t){return t.trim()})),2),u=a[0],c=a[1];if(u.startsWith("(")&&u.endsWith(")")){var l=i(u.slice(1,-1).split(",").map((function(t){return t.trim()})),2);u=l[0],n=l[1]}var f=r(e,c);if(Array.isArray(f)){var s=f.map((function(r,e){var o=t.cloneNode(!0),a=o.innerHTML;return a=a.replaceAll(/{{(.*?)}}/g,(function(t,o){return o.startsWith("".concat(u,"."))||o===n?new Function(u,n,"return ".concat(o))(r,e):t})),o.innerHTML=a,o.outerHTML})).join("");t.outerHTML=s}else console.error("%c Component [".concat(e.tagName,']: j-for data for value "').concat(c,'" is not iterable, output is "').concat(f,'"'),"background:#0d47a1; color: #fff; padding:3px;")})),n.body.innerHTML}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function f(t){var r=this,e=(new DOMParser).parseFromString(t,"text/html"),n=e.querySelectorAll("[j-if]");return 0===n.length?t:(n.forEach((function(t){var e,n,o=t.getAttribute("j-if");if(o.match(/==/i)||o.match(/!==/i)){var a=(e=o.split("=="),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=a.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,n)||function(t,r){if(t){if("string"==typeof t)return l(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,r):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],u=a[1];i=r.getDynamicData(i.replace("!","").trim()),u=r.getDynamicData(u.trim())}else i=r.getDynamicData(o.trim());o.match(/==/i)?i!=u&&t.remove():o.match(/!==/i)?i===u&&t.remove():i||t.remove(),t.removeAttribute("j-if")})),e.body.innerHTML)}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,r){if(t&&"object"===y(t))return r.split(".").reduce((function(t,r){return t&&t[r]}),t)}function p(){this.args.data&&(this.data=this.proxy(this.args.data||{}),console.log("this.data: in getData",this.data),this.dynamicKeys.push("data"));var t=this.getAttribute("data-parent");if(t){var r,e=this.closest(t),n=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return s(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(u)throw a}}}}(this.attributes);try{for(n.s();!(r=n.n()).done;){var o=r.value;if("el"===o.name||o.name.startsWith("el:")){var a="el"===o.name?"el":o.name.slice(3),i=m(e,o.value);void 0!==i?(this[a]=this.proxy(i||{}),this.dynamicKeys.push(a)):console.warn("[".concat(this.tagName,'] Failed to resolve prop "').concat(a,'" from path "').concat(o.value,'"'))}}}catch(t){n.e(t)}finally{n.f()}}else console.warn("[".concat(this.tagName,"] Parent component has no data, thought it can be normally."))}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function v(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function h(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var r=function(t){if("object"!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=d(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(r)?r:r+""}function g(t){var r="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(r){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return function(t,r,e){if(A())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,r);var o=new(t.bind.apply(t,n));return e&&S(o,e.prototype),o}(t,arguments,w(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),S(e,t)},g(t)}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}function S(t,r){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},S(t,r)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}window.app={com:function(t){customElements.define(t.name,function(e){function n(){var r;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),(r=function(t,r,e){return r=w(r),function(t,r){if(r&&("object"==d(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A()?Reflect.construct(r,e||[],w(t).constructor):r.apply(t,e))}(this,n)).args=t,r.dynamicKeys=[],r.r=t.r||"data-updated",r.processAttr=o.bind(r),r.processEvents=a.bind(r),r.processFor=c.bind(r),r.processIf=f.bind(r),r.getData=p.bind(r),r.methods=t.methods||{},t.methods&&Object.entries(t.methods).forEach((function(t){var e=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=a.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(t,r)||function(t,r){if(t){if("string"==typeof t)return v(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=e[0],o=e[1];r[n]=o.bind(r)})),r.tpl=t.tpl||function(){return"<div>Component tpl method is missing</div>"},r.getData(),r.render(),r.simple_reactivity(),r.r&&document.addEventListener(r.r,(function(){r.render(),console.log("%c Component [".concat(r.tagName,'] rerendered due to event "').concat(r.r,'"'),"background:#0ff; padding:3px;")})),t.mount&&("function"==typeof t.mount?t.mount.call(r):Array.isArray(t.mount)&&t.mount.forEach((function(t){return t.call(r)}))),r}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&S(t,r)}(n,e),i=n,u=[{key:"render",value:function(){var t=this.tpl();t=this.processAttr(t),t=this.processFor(t),t=this.processIf(t),t=this.processInterpolation(t),this.innerHTML=t,this.processEvents()}},{key:"proxy",value:function(t){var r=this;return new Proxy(t,{get:function(t,r){return t[r]},set:function(t,e,n){t[e]=n;var o=new Event("data-updated",{bubbles:!0});return r.dispatchEvent(o),console.log('%c [proxy] property "'.concat(e,'" changed -> "').concat(n,'"'),"color: green"),!0}})}},{key:"e",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.r||"data-updated",r=new Event(t,{bubbles:!0});this.dispatchEvent(r)}},{key:"processInterpolation",value:function(t){var e=this;return t.includes("{{")?t.replace(/{{(.*?)}}/g,(function(t,n){var o=r(e,n.trim());return void 0!==o?o:""})):t}},{key:"getDynamicData",value:function(t){var e=this;return this.dynamicKeys.length&&this.dynamicKeys.forEach((function(n){t.startsWith("".concat(n,"."))&&(t=r(e,t))})),t}},{key:"simple_reactivity",value:function(){var t=this;this.dynamicKeys.forEach((function(r){var e=t[r];["change","input","select","keyup"].forEach((function(r){t.addEventListener(r,(function(t){e&&t.target.id&&(e[t.target.id]=t.target.value)}))}))}))}}],u&&h(i.prototype,u),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,u}(g(HTMLElement)))}}})();